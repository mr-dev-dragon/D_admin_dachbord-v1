ResizeStartVal::{{ ResizeStartVal | json }} <br /><br /><br /><br />
ResizeEndVal:: {{ ResizeEndVal | json }} <br /><br /><br /><br />

mainZone::{{ mainZone | json }} <br /><br /><br /><br />
zoneMap:: {{ zoneMap.get("0") | json }}<br /><br /><br /><br />
<div class="box">
  <div class="tool d-flex">
    <div class="input-group input_Bluk mb-3">
      <input readonly class="form-control" placeholder="Row Unit" />
      <div class="input-group-text" id="basic-addon2">
        <select
          [(ngModel)]="paramiter[0].d_zoonrowUnit"
          class="pagination-active pageRowsOptionsValue"
        >
          <option id="option" [value]="'px'">px</option>
          <option id="option" [value]="'rem'">rem</option>
          <option id="option" [value]="'%'">%</option>
          <option id="option" [value]="'rem'">rem</option>
        </select>
      </div>
    </div>
    <div class="input-group input_Bluk mb-3">
      <input readonly class="form-control" placeholder="Row Unit" />
      <div class="input-group-text" id="basic-addon2">
        <select
          [(ngModel)]="paramiter[0].d_zoonColUnit"
          class="pagination-active pageRowsOptionsValue"
        >
          <option id="option" [value]="'px'">px</option>
          <option id="option" [value]="'rem'">rem</option>
          <option id="option" [value]="'%'">%</option>
          <option id="option" [value]="'rem'">rem</option>
        </select>
      </div>
    </div>
    <div class="input-group inputBluk mb-3">
      <input
        [(ngModel)]="paramiter[0].d_zoonWidth"
        type="number"
        class="form-control"
        placeholder="Zoon Width"
      />
      <div class="input-group-text" id="basic-addon2">
        <select
          [(ngModel)]="paramiter[0].d_zoonWidthUnit"
          class="pagination-active pageRowsOptionsValue"
        >
          <option id="option" [value]="'px'">px</option>
          <option id="option" [value]="'rem'">rem</option>
          <option id="option" [value]="'%'">%</option>
          <option id="option" [value]="'rem'">rem</option>
        </select>
      </div>
    </div>
    <div class="input-group inputBluk mb-3">
      <input
        [(ngModel)]="paramiter[0].d_zoonHeight"
        type="number"
        class="form-control"
        placeholder="Zoon height"
      />
      <div class="input-group-text" id="basic-addon2">
        <select
          [(ngModel)]="paramiter[0].d_zoonHeightUnit"
          class="pagination-active pageRowsOptionsValue"
        >
          <option id="option" [value]="'px'">px</option>
          <option id="option" [value]="'rem'">rem</option>
          <option id="option" [value]="'%'">%</option>
          <option id="option" [value]="'rem'">rem</option>
        </select>
      </div>
    </div>
    <button
      (click)="changeDiraction()"
      type="button"
      class="btn btn-primary submit"
    >
      dir
    </button>
    <button type="button" class="btn btn-outline-primary submit">
      Primary
    </button>
  </div>
</div>

<container>
  <div class="row">
    <div class="div mb-5 mt-5">
      <ng-container *ngIf="mainZone.subCells.length; else btn">
        <ng-container
          *ngTemplateOutlet="
            splitterTemplate;
            context: {
              parentId: mainZone.cellid,
              cells: mainZone.subCells,
              dir: mainZone.dir
            }
          "
        ></ng-container>
      </ng-container>
      <ng-template #btn>
        <ng-container
          *ngTemplateOutlet="
            zoonbtns;
            context: { id: mainZone.cellid, cell: mainZone }
          "
        ></ng-container>
      </ng-template>
    </div>
  </div>
</container>

<ng-template #zoonbtns let-id="id" let-parentId="parentId" let-cell="cell">
  <div class="h-w-100 md-dots-bg auto-container">
    <button class="remove-this-zon" (click)="removeZoon(id, parentId)">
      <i class="remove pi pi-times-circle"></i>
    </button>
    <button class="add-btn-top" (click)="addZoon('top', id, parentId, cell)">
      <i class="pi pi-plus-circle"></i>
    </button>
    <button
      class="add-btn-right"
      (click)="addZoon('right', id, parentId, cell)"
    >
      <i class="pi pi-plus-circle"></i>
    </button>
    <button class="add-btn-left" (click)="addZoon('left', id, parentId, cell)">
      <i class="pi pi-plus-circle"></i>
    </button>
    <button
      class="add-btn-buttom"
      (click)="addZoon('bottom', id, parentId, cell)"
    >
      <i class="pi pi-plus-circle"></i>
    </button>
    <button
      class="add-btn-center"
      (click)="addZoon('main', id, parentId, cell)"
    >
      <p class="pi pi-plus-circle"></p>
    </button>
  </div>
</ng-template>

<ng-template
  #splitterTemplate
  let-parentId="parentId"
  let-dir="dir"
  let-cells="cells"
>
  <p-splitter
    *ngIf="refrshSplitter != parentId"
    [panelSizes]="
      cells | readDataTable : (dir == 'horizontal' ? 'width' : 'height')
    "
    styleClass="mb-5"
    (onResizeStart)="onResizeStart($event, parentId, dir, cells)"
    (onResizeEnd)="onResizeEnd($event, parentId, dir, cells)"
    [style]="{ height: '100%' }"
    [layout]="dir"
  >
    <ng-template *ngFor="let cell of cells; let i = index" pTemplate>
      <ng-container *ngIf="cell.subCells.length; else recallBtns">
        <ng-container
          *ngTemplateOutlet="
            splitterTemplate;
            context: {
              parentId: cell.cellid,
              cells: cell.subCells,
              dir: cell.dir
            }
          "
        ></ng-container>
      </ng-container>
      <ng-template #recallBtns>
        <ng-container
          *ngTemplateOutlet="
            zoonbtns;
            context: { parentId, id: cell.cellid, cell }
          "
        ></ng-container>
      </ng-template>
    </ng-template>
  </p-splitter>
</ng-template>

<!-- 
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------- 
-->

<div class="mt-5 md-5">
  <container>
    <div class="row">
      <div class="div mb-5 mt-5">
        <div
          class="d"
          [ngClass]="{
            'd-coll': mainZone.dir == 'vertical',
            'd-row': mainZone.dir == 'horizontal'
          }"
          [ngStyle]="{
            width: mainZone.width + '%',
            height: mainZone.height + '%',
            border: 'solid 1px #333'
          }"
        >
          <ng-container
            *ngTemplateOutlet="
              divTemplate;
              context: {
                cells: mainZone.subCells
              }
            "
          ></ng-container>
        </div>
      </div>
    </div>
  </container>
</div>

<ng-template
  #divTemplate
  let-cells="cells"
>


      <div
       *ngFor="let cell of cells; let i = index"
        class="d"
        [ngClass]="{
          'd-coll': cell.dir == 'vertical',
          'd-row': cell.dir == 'horizontal'
        }"
        [ngStyle]="{
          width: cell.width + '%',
          height: cell.height + '%',
          border: 'solid 1px #333'
        }"
      >
        <ng-container
          *ngTemplateOutlet="
            divTemplate;
            context: {
              cells: cell.subCells
            }
          "
        ></ng-container>
      </div>
 


  <!-- </div> -->
</ng-template>

<!-- 
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
 -->

<!-- 
<ng-template #splitterRow let-row let-index let-updateValue>
  <p-splitter
    *ngIf="row.length > 1"
    [panelSizes]="aplaysomedivs"
    styleClass="mb-5"
    [style]="{ height: '100%' }"
    layout="vertical"
  >
    <ng-container *ngFor="let o of row">
      <ng-container *ngIf="o.map; else elseBlock">
        <ng-template pTemplate>
          <ng-container
            *ngTemplateOutlet="splitterRow; context: { $implicit: o }"
          >
          </ng-container>
        </ng-template>
      </ng-container>
      <ng-template #elseBlock>
        <ng-template pTemplate>
          <ng-container
            *ngTemplateOutlet="splitterCol; context: { $implicit: this.col }"
          ></ng-container>
        </ng-template>
      </ng-template>
    </ng-container>
  </p-splitter>
</ng-template>
<ng-template #splitterCol let-col>
  <p-splitter
    *ngIf="col.length > 1"
    [style]="{ height: '100%' }"
    [panelSizes]="aplaysomedivs"
    styleClass="mb-5"
  >
    <ng-container *ngFor="let o of col; let i = index">
      <ng-container *ngIf="o.map; else elseBlock">
        <ng-template pTemplate>
          <ng-container
            *ngTemplateOutlet="splitterCol; context: { $implicit: o }"
          >
          </ng-container>
        </ng-template>
      </ng-container>
      <ng-template #elseBlock>
        <ng-template pTemplate> {{ o }}--{{ resizwvalue | json }} </ng-template>
      </ng-template>
    </ng-container>
  </p-splitter>
</ng-template>
<!-- 



        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ?????????????????????????????????????????????????????????????????????????????????????????????????????????????
        ????????????????????????????????????????????????????????????????????????????????????????????????????????????? 



        
      -->
<!--  
<br class="m-5" />
<container>
  <ng-container
    *ngTemplateOutlet="zoonRow; context: { $implicit: aplaysomedivs }"
  ></ng-container>
</container>
<ng-template #zoonRow let-data>
  <ng-container *ngFor="let box of data; let boxIndex = index">
    <ng-container
      *ngIf="box.row.map && box.row.length > 1; else this_has_no_more_row_init"
    >
      <ng-container *ngFor="let row of box.row; let i = index">
        <ng-container
          *ngTemplateOutlet="insertRowArry; context: { box: row, type: 'row' }"
        ></ng-container>
      </ng-container>
    </ng-container>
    <ng-template #this_has_no_more_row_init>
      <ng-container *ngIf="box.row.map; else no_row_init_and_not_arry">
        <div [ngStyle]="{ height: box.row[0] + paramiter[0].d_zoonrowUnit }">
          ===> *[{{ box.row[0] }}]*
          <ng-container
            *ngTemplateOutlet="
              insertRowArry;
              context: { box: box.cols, type: 'cols' }
            "
          >
          </ng-container>
        </div>
      </ng-container>
      <ng-template #no_row_init_and_not_arry>
        <div [ngStyle]="{ height: box.row + paramiter[0].d_zoonrowUnit }">
          ===> *{{ box.row }}*
          <ng-container
            *ngTemplateOutlet="
              insertRowArry;
              context: { box: box.cols, type: 'cols' }
            "
          ></ng-container>
        </div>
      </ng-template>
    </ng-template>
  </ng-container>
</ng-template>
<ng-template #chikIf let-data="data" let-type="type">
  <ng-container *ngIf="data.map && data == null; else notArry">
    <ng-container
      *ngTemplateOutlet="insertRowArry; context: { box: data.cols, type: type }"
    ></ng-container>
  </ng-container>
  <ng-template #notArry>
    <ng-container *ngIf="data != null; else notArry">
      <ng-container
        *ngTemplateOutlet="
          insertRowArry;
          context: { box: data.cols, type: type }
        "
      ></ng-container>
    </ng-container>
    <ng-template #notArry>
      <div
        *ngIf="type == 'row'; else notRowInThis"
        [ngStyle]="{ height: data + paramiter[0].d_zoonrowUnit }"
      >
        ===> *{{ data }}*row
      </div>
      <ng-template #notRowInThis>
        <div [ngStyle]="{ width: data + paramiter[0].d_zoonColUnit }">
          ===> *{{ data }}* width
        </div>
      </ng-template>
    </ng-template>
  </ng-template>
</ng-template>
<ng-template #insertRowArry let-box="box" let-type="type">
  <ng-container *ngIf="type == 'row'; else paramiterForCols">
    <ng-container *ngFor="let item of box">
      <ng-container *ngIf="!item.map">
        <div [ngStyle]="{ height: item + paramiter[0].d_zoonrowUnit }">
          ===> *{{ item }}*
        </div>
      </ng-container>
      <ng-container *ngIf="item.map && item.length > 1">
        <ng-container
          *ngTemplateOutlet="insertRowArry; context: { $implicit: item }"
        ></ng-container>
      </ng-container>
      <ng-container *ngIf="item.map && item.length <= 1">
        <div [ngStyle]="{ height: item + paramiter[0].d_zoonrowUnit }">
          ===> *{{ item }}*
        </div>
      </ng-container>
    </ng-container>
  </ng-container>
  <ng-template #paramiterForCols>
    <ng-container *ngFor="let item of box">
      <ng-container *ngIf="!item.map">
        <div [ngStyle]="{ width: item + paramiter[0].d_zoonColUnit }">
          ===> *{{ item }}*
        </div>
      </ng-container>
      <ng-container *ngIf="item.map && item.length > 1">
        <ng-container
          *ngTemplateOutlet="insertRowArry; context: { $implicit: item }"
        ></ng-container>
      </ng-container>
      <ng-container *ngIf="item.map && item.length <= 1">
        <div [ngStyle]="{ width: item + paramiter[0].d_zoonColUnit }">
          ===> *{{ item }}*
        </div>
      </ng-container>
    </ng-container>
  </ng-template>
</ng-template>


<container>
   <ng-container *ngTemplateOutlet="zoonCol; context: { $implicit: aplaysomedivs }"></ng-container>
</container>
<ng-template #zoonCol let-data> 
    <ng-container *ngFor=" let box of data" >
      <ng-container *ngIf="(box.cols.map && box.cols.length >1 );  else  this_has_no_more_cols_init ">
          <ng-container *ngFor="let col of box.cols ;let i =index">
               <ng-container *ngTemplateOutlet="insertColsArry; context: { $implicit: col }"></ng-container>
          </ng-container>
      </ng-container>
      <ng-template #this_has_no_more_cols_init>
          <ng-container *ngIf="box.clos.map;else  no_cols_init_and_not_arry">
            <div [ngStyle]="{width:box.cols[0]+paramiter[0].d_zoonrowUnit}">
                    ===> *[{{box.cols[0]}}]*
            </div>
        </ng-container>
          <ng-template #no_cols_init_and_not_arry>
            <div [ngStyle]="{width: box.cols +paramiter[0].d_zoonrowUnit}">
                    ===> *{{box.cols}}*
            </div>
        </ng-template>
      </ng-template>
    </ng-container>
</ng-template>
<ng-template #insertColsArry let-box>
    <ng-container *ngFor="let item of box">
            <ng-container *ngIf="!item.map">
              <div [ngStyle]="{width: item +paramiter[0].d_zoonrowUnit}">
                      ===> *{{item}}*
              </div>
            </ng-container>
          <ng-container *ngIf="(item.map && item.length >1)">
              <ng-container *ngTemplateOutlet="insertColsArry; context: { $implicit: item }"></ng-container>
          </ng-container>
            <ng-container *ngIf="(item.map && item.length <=1)">
              <div [ngStyle]="{width: item +paramiter[0].d_zoonrowUnit}">
                      ===> *{{item}}*
              </div>
            </ng-container>
    </ng-container>   
</ng-template>  -->
